:root{
  --bg: #ffffff;
  --panel: #fbfff9;
  --accent: #15c26b;
  --accent-2: #25eb88;
  --text-dark: #052107;
  --text-muted: #2b3a2e;
  --danger: #d63434;
  --highlight: #b7e6c3;
  --radius: 10px;
  --shadow: 0 6px 18px rgba(7, 68, 36, 0.08);
  --trans: all 0.25s ease;
}

*{box-sizing:border-box}

html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Arial, sans-serif;background:var(--bg);color:var(--text-dark);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}

header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:18px 22px;
  background:linear-gradient(180deg, #ffffff, var(--panel));
  border-bottom:1px solid rgba(21,128,61,0.06);
  box-shadow:var(--shadow);
}

header .title{font-weight:800;color:var(--accent);font-size:1.25rem;letter-spacing:0.4px}
header .subtitle{font-size:0.95rem;color:var(--text-muted)}

.container{display:flex;gap:16px;padding:18px;align-items:flex-start}

.controls{
  width:320px;
  display:flex;
  flex-direction:column;
  gap:12px;
  background:var(--panel);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:var(--shadow);
  border:1px solid rgba(21,128,61,0.06);
}

.controls .row{display:flex;gap:8px;align-items:center}
.controls label{font-size:13px;color:var(--text-muted);font-weight:600}
.controls input[type="text"], .controls select{
  width:100%;
  padding:10px 12px;
  border-radius:8px;
  border:1px solid rgba(7,68,36,0.08);
  background:#fff;
  color:var(--text-dark);
  transition:var(--trans);
  font-size:14px;
}
.controls input[type="text"]:focus, .controls select:focus{outline:none;border-color:var(--accent)}

.btn-row{display:flex;gap:10px}
button{
  padding:9px 12px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:700;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;
  box-shadow:0 6px 14px rgba(21,128,61,0.12);
  transition:var(--trans);
  font-size:14px;
}
button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(21,128,61,0.08);box-shadow:none}
button.warn{background:#ef4444}
button:active{transform:translateY(1px)}

.canvas{
  flex:1;
  min-height:640px;
  background: #ffffff;
  border-radius:var(--radius);
  border:1px solid rgba(7,68,36,0.04);
  padding:12px;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:12px;
  overflow:auto;
}

#treeArea{
  flex:1;
  background:linear-gradient(180deg,#fff,#f7fff7);
  border-radius:8px;
  padding:8px;
  position:relative;
  overflow:auto;
  display:flex;
  align-items:center;
  justify-content:center;
}

svg{width:100%;height:100%;overflow:visible}

.edge{stroke:#cfeee0;stroke-width:2px;transition:var(--trans);opacity:0.95}
.edge.highlight{stroke:var(--accent);stroke-width:3px;opacity:1}

.node circle{
  fill:#ffffff;
  stroke:var(--accent);
  stroke-width:2px;
  transition:transform 0.25s ease, fill 0.25s ease, stroke 0.25s ease;
  cursor:pointer;
  filter: drop-shadow(0 6px 12px rgba(7,68,36,0.06));
}
.node circle.red{fill:#ffd7d7;stroke:var(--danger)}
.node circle.black{fill:#0b0b0b;stroke:#0b0b0b}
.node circle.highlight{transform:scale(1.06);stroke-width:3px;stroke:var(--accent-2)}
.node text{
  font-weight:700;
  font-size:13px;
  fill:var(--text-dark);
  text-anchor:middle;
  dominant-baseline:middle;
  pointer-events:none;
}

.nodeRect{fill:#ffffff;stroke:var(--accent);stroke-width:2px;rx:8;filter: drop-shadow(0 6px 12px rgba(7,68,36,0.04))}
.nodeMultiText{font-size:12px;fill:var(--text-dark);font-weight:700;text-anchor:middle;dominant-baseline:middle}

.tooltip{
  position:fixed;
  pointer-events:none;
  background:#ffffff;
  color:var(--text-dark);
  border:1px solid rgba(7,68,36,0.08);
  box-shadow:0 8px 20px rgba(7,68,36,0.06);
  padding:8px 10px;
  border-radius:8px;
  font-size:13px;
  display:none;
  z-index:9999;
}

.tooltip.visible{display:block}

.controls .status{
  padding:8px;border-radius:8px;font-weight:700;text-align:center;font-size:13px;
  background:linear-gradient(180deg,#f0fff4,#e6fff0);color:var(--text-dark);border:1px solid rgba(21,128,61,0.06)
}

.log{
  width:320px;
  background:var(--panel);
  border-radius:var(--radius);
  padding:12px;
  box-shadow:var(--shadow);
  border:1px solid rgba(7,68,36,0.04);
  max-height:320px;
  overflow:auto;
  font-family: monospace;
  font-size:13px;
  color:var(--text-dark);
}

.animation-step{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#ffffff;
  border-radius:10px;
  padding:10px 14px;
  border:1px solid rgba(7,68,36,0.06);
  box-shadow:0 10px 30px rgba(7,68,36,0.06);
  font-weight:700;
  color:var(--text-dark);
}

@keyframes pulse {
  0%{transform:scale(1);box-shadow:0 0 0 0 rgba(21,128,61,0.08)}
  70%{transform:scale(1.04);box-shadow:0 0 18px 6px rgba(21,128,61,0.06)}
  100%{transform:scale(1);box-shadow:0 0 0 0 rgba(21,128,61,0)}
}

.node circle.pulse{animation:pulse 1.1s ease-in-out}

@media (max-width:1000px){
  .container{flex-direction:column;padding:12px}
  .controls{width:100%}
  .log{width:100%}
  header{padding:12px}
}
